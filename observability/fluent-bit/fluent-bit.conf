[SERVICE]
    Flush        1
    Log_Level    debug
    Daemon       off
    Parsers_File parsers.conf

[INPUT]
    Name              tail
    Path              /var/log/ballerina/*.log
    Parser            ballerina_json
    Tag               ballerina.logs
    Refresh_Interval  5
    Read_from_Head    true

[FILTER]
    Name    modify
    Match   ballerina.logs
    # Add fields that you want to use as Loki labels
    Add     job         ballerina-services
    Add     service     bi-services
    Add     environment docker

[OUTPUT]
    Name        loki
    Match       ballerina.logs
    Host        loki
    Port        3100
    # Use label_keys to promote record fields to Loki labels.
    # The 'job' label is highly recommended for Prometheus compatibility.
    label_keys  $job, $service, $environment
    # The 'labels' parameter is only for static key=value pairs.